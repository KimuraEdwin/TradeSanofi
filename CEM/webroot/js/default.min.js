var getCurrentSequence = function () {
    var b = location.pathname;
    var g = b.split("/");
    var h = g[g.length - 1].split(".")[0];
    var a = (h == "index") ? 1 : h;
    return parseInt(a)
};

function navigate(b) {
    location.href = (b == 1) ? "index.html" : (b.toString().length > 1) ? (b + ".html") : ("0" + b + ".html")
}

function nextsequence() {
    var a = getCurrentSequence() + 1;
    if (a <= 50) {
        $("#stage, #bg").animate({
            opacity: 0,
            right: "1024px",
        }, 200, function () {
            navigate(a)
        })
    }
}

function prevsequence() {
    var a = getCurrentSequence() - 1;
    if (a > 0) {
        $("#stage, #bg").animate({
            opacity: 0,
            left: "1024px"
        }, 200, function () {
            navigate(a)
        })
    }
}

function sleep(s) {
    setTimeout(s);
}

$("[data-nav-comandos]").click(function () {
    var next = $(this).attr("data-layer");
    console.log(next);
    $(".btn-comandos-layer").removeClass("active-comandos-layer");

    var set = $(this).parent().attr("data-layer-set");
    var nextlayer = $(this).attr("class");

    $(set + ".btn-comandos-layer").removeClass("active-comandos-layer");
    $(set + nextlayer).addClass("active-comandos-layer");
    console.log(nextlayer);
});

$("[data-nav]").click(function () {
    var next = $(this).attr("data-nav");
    $(".content-page").removeClass("show");
    $(".btn-acesso-geral").removeClass("active-side");
    $(".text-side-bar2").removeClass("active-side");
    $(".text-side-bar2").css("z-index", "200");

    $(next).addClass("show");
    $(this).addClass("active-side");
});

$("[data-layer-launch]").click(function () {
    var set = $(this).parent().attr("data-layer-set");
    var nextlayer = $(this).attr("data-layer");
    $('#letra-transicao-launch').addClass("animate");
    //$(set + ".layer").removeClass("show");
    //$(set + nextlayer).addClass("show");
});

$("[data-layer]").click(function () {
    var set = $(this).parent().attr("data-layer-set");
    var nextlayer = $(this).attr("data-layer");
    $(set + ".layer").removeClass("show");
    $(set + nextlayer).addClass("show");
});

$("[data-ir]").click(function () {
    var set = $(this).parent().attr("data-layer-set");
    var nextlayer = $(this).attr("data-ir");
    $(set + ".layer").removeClass("show");
    $(set + nextlayer).addClass("show");

    console.log(nextlayer);
});

$("[data-layer-ir]").click(function () {
    var set = $(this).parent().attr("data-layer-set");
    var nextlayer = $(this).attr("data-layer-ir");
    $(set + ".layer").removeClass("show");
    $(set + nextlayer).addClass("show");
});

$("[data-layer-glo]").click(function () {
    var set = $(this).parent().parent().parent().attr("data-layer-set");
    var nextlayer = $(this).attr("data-layer-glo");
    $(set + ".layer").removeClass("show");
    $(set + nextlayer).addClass("show");
});

$("[data-page-pv]").click(function () {
    var set = $(this).parent().parent().parent().parent().attr("data-layer-set");
    var nextlayer = $(this).attr("data-page-pv");
    $(set + ".layer").removeClass("show");
    $(set + nextlayer).addClass("show");
});

$("[data-page-pv-inner]").click(function () {
    var set = $(this).parent().parent().parent().parent().parent().parent().parent().parent().parent().parent().attr("data-layer-set");
    var nextlayer = $(this).attr("data-page-pv-inner");
    $(set + ".layer").removeClass("show");
    $(set + nextlayer).addClass("show");
});

$("[data-popup]").click(function () {
    var popup = $(this).attr("data-popup");
    $(popup).addClass("show");
});

$("[data-close]").click(function () {
    $(".popup").removeClass("show");
    $(".popup-dgmp").removeClass("show");
});

$("[data-toggle-cat]").click(function () {
    var produto = $("body").attr("data-product");
    var cat = $(this).attr("data-toggle-cat");
    localStorage.setItem(produto + "-cat", cat);
    location.reload();
});

$("[data-toggle-active]").click(function () {
    var classe = $(this).attr("data-toggle-active");

    $(classe).removeClass("active");
    $(this).addClass("active");
});

$(".button-cascade").click(function(){
    $(".menu-hover").css("display", "none");
    $(".filtro-menu-cascade").css("display", "none");
    $(".glow").removeClass("glow-produtos");
    $("#top-dcv-menu").removeClass("top-controle");
    $("#top-bgx-menu").removeClass("top-controle");
    $("#top-ep-menu").removeClass("top-controle");
    $("#top-inn-menu").removeClass("top-controle");
    $("#top-launch-menu").removeClass("top-controle");
    $("#top-mpdv-menu").removeClass("top-controle");
    $(".filtro-menu-cascade").css("display", "block");

    var controle = $(this).attr("id");
    var hover = $(this).attr("menu-control");
    $("#"+controle).addClass("top-controle");
    $(hover + ".menu-hover").css("display", "block");
    $("#"+controle + " p").addClass("glow-produtos");
});

$(".filtro-menu-cascade").click(function(){
    $(".menu-hover").css("display", "none");
    $(".glow").removeClass("glow-produtos");
    $(".filtro-menu-cascade").css("display", "none");
    $("#top-dcv-menu").removeClass("top-controle");
    $("#top-bgx-menu").removeClass("top-controle");
    $("#top-ep-menu").removeClass("top-controle");
    $("#top-inn-menu").removeClass("top-controle");
    $("#top-launch-menu").removeClass("top-controle");
    $("#top-mpdv-menu").removeClass("top-controle");
});





$(document).ready(function (b) {
    /*$("body").on("swipeleft", nextsequence);
    $("body").on("swiperight", prevsequence);
    $(".seta-left").click(prevsequence);
    $(".seta-right").click(nextsequence);*/

    $("[data-next-layer]").on("swipeleft", function () {
        var set = $(this).attr("data-layer-set");
        var nextlayer = $(this).attr("data-next-layer");
        $(set + ".layer").removeClass("show");
        $(set + nextlayer).addClass("show");
    });

    $("[data-prev-layer]").on("swiperight", function () {
        var set = $(this).attr("data-layer-set");
        var nextlayer = $(this).attr("data-prev-layer");
        $(set + ".layer").removeClass("show");
        $(set + nextlayer).addClass("show");
    });

    var produto = $("body").attr("data-product");
    var cat = localStorage.getItem(produto + "-cat");
    if(cat != null && cat != undefined && cat != ""){
        $(".cats").removeClass("active");
        $(cat).addClass("active");
    }

    
    $("[data-swipe-to-left]").on("swipeleft", function(){
        $(this).animate({
            left: -500,
            opacity: 0
        }, 200, function(){
            var set = $(this).attr("data-layer-set");
            var nextlayer = $(this).attr("data-swipe-to-left");
            $(set + ".layer").removeClass("show");
            $(set + nextlayer).addClass("show");
            $(set + nextlayer).css("left", "300px");
            $(set + nextlayer).css("opacity", "0");
            $(set + nextlayer).animate({
                left: 0,
                opacity: 1
            }, 700);

        });
        
    });

    $("[data-swipe-to-right]").on("swiperight", function(){
        $(this).animate({
            left: 500,
            opacity: 0
        }, 200, function(){
            var set = $(this).attr("data-layer-set");
            var nextlayer = $(this).attr("data-swipe-to-right");
            $(set + ".layer").removeClass("show");
            $(set + nextlayer).addClass("show");
            $(set + nextlayer).css("left", "-300px");
            $(set + nextlayer).css("opacity", "0");
            $(set + nextlayer).animate({
                left: 0,
                opacity: 1
            }, 700);

        });
        
    });

    $("[data-swipe-to-top]").on("swipeup", function(){
        $(this).animate({
            top: -500,
            opacity: 0
        }, 200, function(){
            var set = $(this).attr("data-layer-set");
            var nextlayer = $(this).attr("data-swipe-to-top");
            $(set + ".layer").removeClass("show");
            $(set + nextlayer).addClass("show");
            $(set + nextlayer).css("top", "300px");
            $(set + nextlayer).css("opacity", "0");
            $(set + nextlayer).animate({
                top: 0,
                opacity: 1
            }, 700);

        });
        
    });

    $("[data-swipe-to-bottom]").on("swipedown", function(){
        $(this).animate({
            top: 500,
            opacity: 0
        }, 200, function(){
            var set = $(this).attr("data-layer-set");
            var nextlayer = $(this).attr("data-swipe-to-bottom");
            $(set + ".layer").removeClass("show");
            $(set + nextlayer).addClass("show");
            $(set + nextlayer).css("top", "-300px");
            $(set + nextlayer).css("opacity", "0");
            $(set + nextlayer).animate({
                top: 0,
                opacity: 1
            }, 700);
        });
    });
});