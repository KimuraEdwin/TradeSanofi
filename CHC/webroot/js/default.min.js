var getCurrentSequence = function () {
    var b = location.pathname;
    var g = b.split("/");
    var h = g[g.length - 1].split(".")[0];
    var a = (h == "index") ? 1 : h;
    return parseInt(a)
};

function navigate(b) {
    location.href = (b == 1) ? "index.html" : (b.toString().length > 1) ? (b + ".html") : ("0" + b + ".html")
}

function nextsequence() {
    var a = getCurrentSequence() + 1;
    if (a <= 50) {
        $("#stage, #bg").animate({
            opacity: 0,
            right: "1024px",
        }, 200, function () {
            navigate(a)
        })
    }
}

function prevsequence() {
    var a = getCurrentSequence() - 1;
    if (a > 0) {
        $("#stage, #bg").animate({
            opacity: 0,
            left: "1024px"
        }, 200, function () {
            navigate(a)
        })
    }
}

$("[data-nav]").click(function () {
    var next = $(this).attr("data-nav");
    var classAttr = $(this).attr("class");
    classAttr = classAttr.replace("content-nav-link ", "");

    $(".content-page").removeClass("show");
    $(".content-nav-link").removeClass("active-chc-dor");
    $(".content-nav-link").removeClass("active-chc-gastro");
    $(".content-nav-link").removeClass("active-chc-gripe");
    $(".content-nav-link").removeClass("active-chc-vitamina");
    $(".content-nav-link").removeClass("active-chc-cuidados");

    $(next).addClass("show");
    

    if (classAttr == "dor-febre-menu-cor"){
        $(this).addClass("active-chc-dor");
    }
    else if (classAttr == "vitaminas-menu-cor"){
        $(this).addClass("active-chc-vitamina");
    }
    else if (classAttr == "gastro-menu-cor"){
        $(this).addClass("active-chc-gastro");
    }
    else if (classAttr == "cuidados-menu-cor"){
        $(this).addClass("active-chc-cuidados");
    }
    else if (classAttr == "gripe-menu-cor"){
        $(this).addClass("active-chc-gripe");
    }

});

$("[data-nav-chc]").click(function () {
    var next = $(this).attr("data-nav-chc");
    var classAttr = $(this).attr("class");
    var active = $(this).parent().attr("id");

    $(".content-page").removeClass("show");
    $(".btn-acesso-geral").removeClass(active);

    $(next).addClass("show");
    $(this).addClass(active);

});

$("[data-nav-glo]").click(function () {
    var next = $(this).attr("data-nav-glo");
    $(".content-page").removeClass("show");
    $(".content-nav-link").removeClass("active-chc-glo");

    $(next).addClass("show");
    $(this).addClass("active-chc-glo");
    
});

$("[indice-menu-glo]").click(function () {
    var next = $(this).attr("indice-menu-glo");
    $(".content-nav-link").removeClass("active-chc-glo");

    $(next).addClass("active-chc-glo");
    
});

$("[data-close-merchan]").click(function(){
    var close = $(this).attr("data-close-merchan");

    $(".PROD_MERCHAN").removeClass("show");
    $(".btn-merchan").removeClass("active-merchan-btn");
    $(".PROD_MERCHAN" + close).addClass("show");
});

$("[data-produto]").click(function(){
    $(".btn-merchan").removeClass("active-merchan-btn");
    var nextlayer = $(this).attr("data-produto");
    
    $(this).addClass("active-merchan-btn");

    $(".PROD_MERCHAN").removeClass("show");
    $("#" + nextlayer + "." + nextlayer).addClass("show");
});

$("[data-layer]").click(function () {
    if($(this).hasClass("merc-dorflex")){
        $(".merc-dorflex").removeClass("active");
        $(this).addClass("active");
    }

    var set = $(this).parent().attr("data-layer-set");
    var nextlayer = $(this).attr("data-layer");

    $(set + ".layer").removeClass("show");
    $(set + nextlayer).addClass("show");
});

$("[data-layer-mapa]").click(function () {
    var set = $(this).parent().parent().attr("data-layer-set-mapa");
    var nextlayer = $(this).attr("data-layer-mapa");

    $(set + ".layer").removeClass("show");
    $(set + nextlayer).addClass("show");
});

$("[data-layer-ir]").click(function () {
    var set = $(this).parent().attr("data-layer-set");
    var nextlayer = $(this).attr("data-layer-ir");
    $(set + ".layer").removeClass("show");
    $(set + nextlayer).addClass("show");
});

$("[data-layer-glo]").click(function () {
    var set = $(this).parent().parent().parent().attr("data-layer-set");
    var nextlayer = $(this).attr("data-layer-glo");
    $(set + ".layer").removeClass("show");
    $(set + nextlayer).addClass("show");
});

$("[data-page-pv]").click(function () {
    var set = $(this).parent().parent().parent().parent().attr("data-layer-set");
    var nextlayer = $(this).attr("data-page-pv");
    $(set + ".layer").removeClass("show");
    $(set + nextlayer).addClass("show");
});

$("[data-page-pv-inner]").click(function () {
    var set = $(this).parent().parent().parent().parent().parent().parent().parent().parent().parent().parent().attr("data-layer-set");
    var nextlayer = $(this).attr("data-page-pv-inner");
    $(set + ".layer").removeClass("show");
    $(set + nextlayer).addClass("show");
});

$("[data-layer-farm]").click(function () {
    
    var set = $(this).parent().attr("data-layer-set-farm");
    var nextlayer = $(this).attr("data-layer-farm");
    $(".FARMACIA").removeClass("show-plan-farm");
    $(nextlayer).addClass("show-plan-farm");
    $(".farmacia-controle").removeClass("active-farm");
    $(this).addClass("active-farm");
});

$("[data-layer-plan]").click(function () {
    
    var set = $(this).parent().attr("data-layer-set-plan");
    var nextlayer = $(this).attr("data-layer-plan");
    $(set + ".pack-farmacia").removeClass("show-plan");
    $(set + nextlayer).addClass("show-plan");
});

$("[data-layer-sb-prod]").click(function () {
    $(".sb-opcao").removeClass("active-sb");
    var anterior = ".divisao-produto-merchan";
    var set = $(this).attr("data-layer-sb-prod");
    $(anterior).removeClass("show");
    $(set).addClass("show");
    $(this).addClass("active-sb");
});

$("[data-popup]").click(function () {
    var popup = $(this).attr("data-popup");
    $(popup).addClass("show");
});

$("[data-popup-oq]").click(function () {
    var popup = $(this).attr("data-popup-oq");
    $(popup).addClass("show");
    $(".SKU").removeClass("show");
});

$("[data-close-oq]").click(function () {
    $(".popup").removeClass("show");
    $(".popup2").removeClass("show");
    $(".SKU").addClass("show");
});

$("[data-close]").click(function () {
    $(".popup").removeClass("show");
    $(".popup2").removeClass("show");
});

$("[data-toggle-cat]").click(function () {
    var produto = $("body").attr("data-product");
    var cat = $(this).attr("data-toggle-cat");
    var controleClass = $(this).attr("class");
    controleClass = controleClass.replace("cats ", "");
    controleClass = controleClass.replace("cat1 ", "");
    controleClass = controleClass.replace("cat3 ", "");
    controleClass = controleClass.replace(" active-chc", "");

    $(".cats").removeClass("active-chc-dor");
    $(".cats").removeClass("active-chc-gastro");
    $(".cats").removeClass("active-chc-gripe");
    $(".cats").removeClass("active-chc-vitamina");
    $(".cats").removeClass("active-chc-cuidados");

    /*localStorage.setItem(produto + "-cat", cat);
    location.reload();*/

    if (controleClass == "dor-febre-menu-cor"){
        $(this).addClass("active-chc-dor");

    }
    else if (controleClass == "vitaminas-menu-cor"){
        $(this).addClass("active-chc-vitamina");

    }
    else if (controleClass == "gastro-menu-cor"){
        $(this).addClass("active-chc-gastro");

    }
    else if (controleClass == "cuidados-menu-cor"){
        $(this).addClass("active-chc-cuidados");

    }
    else if (controleClass == "gripe-menu-cor"){
        $(this).addClass("active-chc-gripe");

    }

});


$("[data-layer-sb]").click(function(){
    $(".merchan-btn").removeClass("active-btn-merchan");
    var set = ".MERCHAN-SB";
    var nextlayer = $(this).attr("data-layer-sb");
    $(this).addClass("active-btn-merchan");
    $(set + ".layer").removeClass("block");
    $(set + nextlayer).addClass("block");
});

$("[data-layer-pv]").click(function(){
    $(".merchan-btn").removeClass("active-btn-merchan");
    var set = ".PV";
    var nextlayer = $(this).attr("data-layer-pv");
    $(this).addClass("active-btn-pv");
    $(".box-menu2-psp").removeClass("show-psp");
    $(set + ".box-menu-dir-psp").removeClass("show-psp");
    $(set + nextlayer).addClass("show-psp");
});

$("[data-layer-gondola]").click(function(){
    $(".btn-pmg-gondola").removeClass("activePMG");
    var set = ".GONDOLA";
    var nextlayer = $(this).attr("data-layer-gondola");
    $(this).addClass("activePMG");
    $(set).removeClass("show");
    $(set + nextlayer).addClass("show");
});

$("[data-layer-gondola-ri]").click(function(){
    var set = ".GONDOLA-RI";
    var nextlayer = $(this).attr("data-layer-gondola-ri");
    $(set).removeClass("show");
    $(set + nextlayer).addClass("show");
});

$("[data-close-prod]").click(function(){
    var layer = $(".sb-opcao").attr("data-layer-sb-prod");
    var layer_close = ".divisao-produto-merchan";
    var layer_pai = $(".sb-opcao");
    $(layer_close).removeClass("show");
    $(layer_pai).removeClass("active-sb");
});

$("[data-close-merchan]").click(function(){
    var layer = ".MERCHAN-SB";
    var layer_interno = ".divisao-produto-merchan";
    $(layer).removeClass("block");
    $(layer_interno).removeClass("show");
    $(".merchan-btn").removeClass("active-btn-merchan");
    $(".sb-opcao").removeClass("active-sb");
});

$(document).ready(function (b) {
    /*$("body").on("swipeleft", nextsequence);
    $("body").on("swiperight", prevsequence);
    $(".seta-left").click(prevsequence);
    $(".seta-right").click(nextsequence);*/

    $("[data-next-layer]").on("swipeleft", function () {
        var set = $(this).attr("data-layer-set");
        var nextlayer = $(this).attr("data-next-layer");
        $(set + ".layer").removeClass("show");
        $(set + nextlayer).addClass("show");
    });

    $("[data-prev-layer]").on("swiperight", function () {
        var set = $(this).attr("data-layer-set");
        var nextlayer = $(this).attr("data-prev-layer");
        $(set + ".layer").removeClass("show");
        $(set + nextlayer).addClass("show");
    });

    $("[data-barra-dorflex]").click(function () {
        $(".barra-content-dorflex").removeClass("show");
        $($(this).attr("data-barra-dorflex")).addClass("show");
    });

    $("[data-swipe-to-left]").on("swipeleft", function(){
        $(this).animate({
            left: -500,
            opacity: 0
        }, 200, function(){
            var set = $(this).attr("data-layer-set");
            var nextlayer = $(this).attr("data-swipe-to-left");
            $(set + ".layer").removeClass("show");
            $(set + nextlayer).addClass("show");
            $(set + nextlayer).css("left", "300px");
            $(set + nextlayer).css("opacity", "0");
            $(set + nextlayer).animate({
                left: 0,
                opacity: 1
            }, 700);

        });
    });

    $("[data-swipe-to-right]").on("swiperight", function(){
        $(this).animate({
            left: 500,
            opacity: 0
        }, 200, function(){
            var set = $(this).attr("data-layer-set");
            var nextlayer = $(this).attr("data-swipe-to-right");
            $(set + ".layer").removeClass("show");
            $(set + nextlayer).addClass("show");
            $(set + nextlayer).css("left", "-300px");
            $(set + nextlayer).css("opacity", "0");
            $(set + nextlayer).animate({
                left: 0,
                opacity: 1
            }, 700);

        });
    });

    var produto = $("body").attr("data-product");
    if(produto != undefined && produto != "" && produto != null) {
        var cat = localStorage.getItem(produto + "-cat");
        $(".cats").removeClass("active-chc");
        if (cat != null && cat != undefined && cat != "") {
            $(cat).addClass("active-chc");
        }
        else {
            $(".cat1").addClass("active-chc");
        }
    }

    $("[data-swipe-to-top]").on("swipeup", function(){
        $(this).animate({
            top: -500,
            opacity: 0
        }, 200, function(){
            var set = $(this).attr("data-layer-set");
            var nextlayer = $(this).attr("data-swipe-to-top");
            $(set + ".layer").removeClass("show");
            $(set + nextlayer).addClass("show");
            $(set + nextlayer).css("top", "500px");
            $(set + nextlayer).css("opacity", "0");
            $(set + nextlayer).animate({
                top: 50,
                opacity: 1
            }, 700);

        });
        
    });

    $("[data-swipe-to-bottom]").on("swipedown", function(){
        $(this).animate({
            top: 500,
            opacity: 0
        }, 200, function(){
            var set = $(this).attr("data-layer-set");
            var nextlayer = $(this).attr("data-swipe-to-bottom");
            $(set + ".layer").removeClass("show");
            $(set + nextlayer).addClass("show");
            $(set + nextlayer).css("top", "-300px");
            $(set + nextlayer).css("opacity", "0");
            $(set + nextlayer).animate({
                top: 50,
                opacity: 1
            }, 700);

        });
    });
});